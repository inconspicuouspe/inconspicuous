<style>
    .login-box {
        display: grid;
    }
    .login-box button {
        justify-self: right;
    }
    #login-content {
        border-style: solid;
        border-radius: 10px;
        border-width: 2px;
        border-color: black;
        padding: 0;
        width: min-content;
        justify-self: right;
    }
    #login-content h2 {
        margin: 0;
    }
    #login-content form {
        margin: 0;
    }
    #login-content p {
        margin-top: 16px;
        margin-bottom: 0;
    }
</style>
<div class="login-box">
    <div id="login-content" style="display: none;">
        <h2>Login</h2>
        <form>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
            <button type="submit">Login</button>
            <p style="visibility: hidden;" id="message"></p>
        </form>
        <p>Don't have an account? <a href="{{ url_for('register') }}">Register here</a>.</p>
    </div>
    <script>
        const loginBox = document.querySelector("#login-content");
        const form = document.querySelector("#login-content form");
        const usernameBox = document.querySelector("#username");
        const passwordBox = document.querySelector("#password");
        const messageBox = document.querySelector("#message");
        function loginSuccess(success) {
            if (success) {
                messageBox.textContent = "Login credentials were correct."
            }
            else {
                messageBox.textContent = "Login credentials were wrong."
            }
            messageBox.style.visibility = messageBox.style.visibility === "hidden" ? "visible" : "hidden";
        }
        form.addEventListener("submit", (event) => {
            event.preventDefault();
            fetch("{{ url_for('login') }}", {
                method: "POST",
                body: JSON.stringify({ username: usernameBox.value, password: passwordBox.value })
            }).then((response) => {reponse.json()}).then((json) => {loginSuccess(json.success)});
        }, true);
    </script>
    <button onclick='if (loginBox.style.display === "none") {loginBox.style.display = "unset";} else {loginBox.style.display = "none";}'>Toggle login box</button>
</div>