<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
    </head>
    <body>
        {% if not session %}
        {% include 'login.html' %}  
        {% else %}
        Logged in as {{ session.username }}.
        <button id="logout-button">Logout</button>
        {% if Settings._CREATE_MEMBERS in session.settings %}
        <style>
        form {
            border-radius: 4px;
            border-color: black;
            border-width: 2px;
            border-style: solid;
            width: min-content;
            white-space: nowrap;
        }
        form * {
            margin: 4px;
        }
        form .settings-box {
            border-radius: 4px;
            border-color: black;
            border-width: 2px;
            border-style: solid;
            width: min-content;
        }
        form .settings-box * {
            margin: 4px;
        }
        .settings-box label {
            border:1px solid #ccc;
            padding:5px;
            display: block;
            -webkit-user-select: none;     
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .settings-box label:hover {
            background:#eee;
            cursor:pointer;
        }
        </style>
        <form id="addUserForm">
            <label for="username">Temporary username:</label>
            <input type="text" id="username" name="username" required>
            <br>
            <label for="pgroup">Permission group:</label>
            <input type="number" id="pgroup" name="pgroup" value="{{ session.permission_group - 1 }}" max="{{ session.permission_group - 1 }}" required>
            <br>
            <label>Settings:</label>
            <div class="settings-box">
            {% for setting in Settings.__members__.values() %}
                {% if setting in session.settings and not setting.name.startswith("_") and setting.name != "NONE" %}
                <label>
                    <input name="setting_{{ setting.name }}" id="setting_{{ setting.name }}" type="checkbox">
                    {{ setting.name.replace("_", " ").title() }}
                </label>
                {% endif %}
            {% endfor %}
            </div>
            <button type="submit">Send</button>
            <p style="visibility: hidden;" id="message"></p>
        </form>
        {% endif %}
        <script>
            {% include 'homeCode.js' %}
        </script>
        {% endif %}
    </body>
</html>
