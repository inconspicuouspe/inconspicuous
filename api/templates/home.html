<html>
    <head>
        <title>Home</title>
    </head>
    <body>
        {% if not session %}
        {% include 'login.html' %}  
        {% else %}
        <style>
        </style>
        Logged in as {{ session.username }}.
        <button id="logout-button">Logout</button>
        {% if Settings._CREATE_MEMBERS in session.settings %}
        <style>
        form {
            border-radius: 4px;
            border-color: black;
            border-width: 2px;
            border-style: solid;
            display: grid;
        }
        form .settings-box {
            border-radius: 4px;
            border-color: black;
            border-width: 2px;
            border-style: solid;
        }
        form .settings-box * {
            margin: 4px;
        }
        </style>
        <form>
            <label for="username">Temporary username:</label>
            <input type="text" id="username" name="username" required>
            <label for="pgroup">Permission group:</label>
            <input type="number" id="pgroup" name="pgroup" value="{{ session.permission_group - 1 }}" max="{{ session.permission_group - 1 }}" required>
            Settings:
            <div class="settings-box">
            {% for setting in Settings.__members__.values() %}
                {% if setting in session.settings and not setting.name.startswith("_") and setting.name != "NONE" %}
                <label for="setting_{{ setting.name }}_">{{ setting.name.replace("_", " ").title() }}</label>
                <input name="setting_{{ setting.name }}_" id="setting_{{ setting.name }}_" type="checkbox">
                {% endif %}
            {% endfor %}
            </div>
            <button type="submit">Send</button>
            <p style="visibility: hidden;" id="message"></p>
        </form>
        {% endif %}
        <script>
            {% include 'homeCode.js' %}
        </script>
        {% endif %}
    </body>
</html>
