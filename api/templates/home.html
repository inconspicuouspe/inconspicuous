<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
    </head>
    <body>
        {% if not session %}
        {% include 'login.html' %}  
        {% else %}
        {% include 'boxedSectionHead.html' %}
        Eingeloggt als {{ session.username }}.
        <button id="logout-button">Ausloggen</button>
        {% if Settings._CREATE_MEMBERS in session.settings %}
        <style>
        input {
            border-color: darkgray;
            border-style: solid;
            border-width: 1px;
            border-radius: 4px;
            margin-top: 2px;
            margin-bottom: 2px;
        }
        input:focus {
            outline: none;
            border-color: black;
        }

        .settings-box label {
            border-width:1px;
            border-style: solid;
            border-color: lightgray;
            border-radius: 4px;
            padding:5px;
            display: block;
            user-select: none;
        }

        .settings-box label:hover {
            background:#eee;
            cursor:pointer;
        }
        </style>
        {% include 'openBoxedSection.html' %}
        <form id="addUserForm">
            <label for="username">Tempor√§rer Nutzername:</label>
            <input type="text" id="username" name="username" required>
            <br>
            <label for="pgroup">Berechtigungsgruppe:</label>
            <input type="number" id="pgroup" name="pgroup" value="{{ session.permission_group - 1 }}" max="{{ session.permission_group - 1 }}" required>
            <br>
            <label>Einstellungen:</label>
            {% include 'openBoxedSection.html' %}
            <div class="settings-box">
            {% for setting in Settings.__members__.values() %}
                {% if setting in session.settings and not setting.name.startswith("_") and setting.name != "NONE" %}
                <label>
                    <input name="setting_{{ setting.name }}" id="setting_{{ setting.name }}" type="checkbox">
                    {{ setting.get_translated_name() }}
                </label>
                {% endif %}
            {% endfor %}
            </div>
            {% include 'closeBoxedSection.html' %}
            <button type="submit">Erstellen</button>
            <p style="visibility: hidden;" id="message"></p>
        </form>
        {% include 'closeBoxedSection.html' %}
        {% endif %}
        <script>
            {% include 'homeCode.js' %}
        </script>
        {% endif %}
    </body>
</html>
